<Window x:Class="XqueezeOS.GalleryWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Gallery - XqueezeOS" 
        Height="700" 
        Width="1000"
        WindowStartupLocation="CenterScreen"
        Background="#1E1E1E">

    <Window.Resources>
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="#007ACC"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#1E8AD6"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Background" Value="#555555"/>
                    <Setter Property="Foreground" Value="#999999"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Image thumbnail template -->
        <DataTemplate x:Key="ImageTemplate">
            <Border Background="#2C2C2C" 
                    BorderBrush="#444444" 
                    BorderThickness="1"
                    Margin="5"
                    CornerRadius="4"
                    Width="180"
                    Height="180">
                <Grid>
                    <Image Source="{Binding ThumbnailPath}" 
                           Stretch="UniformToFill"
                           Margin="5"/>

                    <!-- Image info overlay -->
                    <Border VerticalAlignment="Bottom" 
                            Background="#CC000000"
                            Padding="8,5">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0"
                                       Text="{Binding FileName}" 
                                       Foreground="White" 
                                       FontSize="11"
                                       FontWeight="SemiBold"
                                       TextTrimming="CharacterEllipsis"/>

                            <TextBlock Grid.Row="1"
                                       Text="{Binding FileInfo}" 
                                       Foreground="#CCCCCC" 
                                       FontSize="10"
                                       Margin="0,2,0,0"/>
                        </Grid>
                    </Border>
                </Grid>
            </Border>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title Bar -->
        <Border Grid.Row="0" Background="#0D0D0D" Padding="15,10">
            <Grid>
                <TextBlock Text="🖼️ Gallery" 
                           FontSize="20" 
                           FontWeight="Bold" 
                           Foreground="White"
                           VerticalAlignment="Center"/>

                <StackPanel Orientation="Horizontal" 
                            HorizontalAlignment="Right">
                    <TextBlock Text="View Mode:" 
                               Foreground="White" 
                               VerticalAlignment="Center"
                               Margin="0,0,10,0"/>
                    <ComboBox x:Name="cmbViewMode" 
                              Width="150"
                              SelectionChanged="CmbViewMode_SelectionChanged"
                              Background="#2C2C2C"
                              Foreground="White"
                              BorderBrush="#555555">
                        <ComboBoxItem Content="Grid View" IsSelected="True"/>
                        <ComboBoxItem Content="List View"/>
                    </ComboBox>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Toolbar -->
        <Border Grid.Row="1" Background="#2C2C2C" Padding="10">
            <StackPanel Orientation="Horizontal">
                <Button x:Name="btnRefresh" 
                        Content="🔄 Refresh" 
                        Style="{StaticResource ModernButton}"
                        Click="BtnRefresh_Click"/>
                <Button x:Name="btnViewImage" 
                        Content="👁️ View" 
                        Style="{StaticResource ModernButton}"
                        Click="BtnViewImage_Click"
                        IsEnabled="False"/>
                <Button x:Name="btnDeleteImage" 
                        Content="🗑️ Delete" 
                        Style="{StaticResource ModernButton}"
                        Background="#DC3545"
                        Click="BtnDeleteImage_Click"
                        IsEnabled="False"/>
                <Button x:Name="btnImageInfo" 
                        Content="ℹ️ Info" 
                        Style="{StaticResource ModernButton}"
                        Background="#6C757D"
                        Click="BtnImageInfo_Click"
                        IsEnabled="False"/>
                <Separator Width="20" Background="Transparent"/>
                <Button x:Name="btnOpenFolder" 
                        Content="📁 Open Folder" 
                        Style="{StaticResource ModernButton}"
                        Background="#28A745"
                        Click="BtnOpenFolder_Click"/>
                <Separator Width="20" Background="Transparent"/>
                <TextBlock Text="Filter:" 
                           Foreground="White" 
                           VerticalAlignment="Center"
                           Margin="10,0"/>
                <ComboBox x:Name="cmbFilter" 
                          Width="150"
                          SelectionChanged="CmbFilter_SelectionChanged"
                          Background="#3C3C3C"
                          Foreground="White"
                          BorderBrush="#555555">
                    <ComboBoxItem Content="All Images" IsSelected="True"/>
                    <ComboBoxItem Content="Photos Only"/>
                    <ComboBoxItem Content="Screenshots Only"/>
                    <ComboBoxItem Content="Today"/>
                    <ComboBoxItem Content="This Week"/>
                </ComboBox>
            </StackPanel>
        </Border>

        <!-- Image Gallery -->
        <Grid Grid.Row="2" Margin="10">
            <!-- Grid View -->
            <ScrollViewer x:Name="scrollGridView" 
                          VerticalScrollBarVisibility="Auto"
                          Background="#1A1A1A">
                <ItemsControl x:Name="itemsGrid" 
                              ItemTemplate="{StaticResource ImageTemplate}"
                              MouseDown="ItemsGrid_MouseDown">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </ScrollViewer>

            <!-- List View -->
            <ListBox x:Name="lstImages" 
                     Visibility="Collapsed"
                     Background="#1A1A1A"
                     Foreground="White"
                     BorderThickness="0"
                     SelectionChanged="LstImages_SelectionChanged"
                     MouseDoubleClick="LstImages_MouseDoubleClick">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="5" Height="60">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Image Grid.Column="0" 
                                   Source="{Binding ThumbnailPath}" 
                                   Stretch="UniformToFill"
                                   Margin="5"/>

                            <StackPanel Grid.Column="1" 
                                        VerticalAlignment="Center"
                                        Margin="10,0">
                                <TextBlock Text="{Binding FileName}" 
                                           FontWeight="SemiBold"
                                           FontSize="13"/>
                                <TextBlock Text="{Binding FileInfo}" 
                                           FontSize="11"
                                           Foreground="#AAAAAA"
                                           Margin="0,5,0,0"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2" 
                                        VerticalAlignment="Center"
                                        Margin="10,0">
                                <TextBlock Text="{Binding FileSize}" 
                                           FontSize="11"
                                           Foreground="#AAAAAA"
                                           HorizontalAlignment="Right"/>
                                <TextBlock Text="{Binding DateTaken}" 
                                           FontSize="11"
                                           Foreground="#AAAAAA"
                                           HorizontalAlignment="Right"
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

            <!-- Empty state -->
            <StackPanel x:Name="pnlEmptyState" 
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Center"
                        Visibility="Collapsed">
                <TextBlock Text="🖼️" 
                           FontSize="80" 
                           HorizontalAlignment="Center"
                           Foreground="#444444"/>
                <TextBlock Text="No images found" 
                           FontSize="20" 
                           Foreground="#666666"
                           HorizontalAlignment="Center"
                           Margin="0,20,0,10"/>
                <TextBlock Text="Take photos using the Camera app" 
                           FontSize="14" 
                           Foreground="#555555"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="3" Background="#007ACC" Padding="10,5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="txtStatus" 
                           Grid.Column="0"
                           Text="Ready" 
                           Foreground="White" 
                           VerticalAlignment="Center"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock Text="Total Images: " 
                               Foreground="White" 
                               VerticalAlignment="Center"/>
                    <TextBlock x:Name="txtImageCount" 
                               Text="0" 
                               Foreground="White" 
                               FontWeight="Bold"
                               VerticalAlignment="Center"
                               Margin="0,0,20,0"/>

                    <TextBlock Text="Selected: " 
                               Foreground="White" 
                               VerticalAlignment="Center"/>
                    <TextBlock x:Name="txtSelectedCount" 
                               Text="0" 
                               Foreground="White" 
                               FontWeight="Bold"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
